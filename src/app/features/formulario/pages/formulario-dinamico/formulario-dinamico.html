<div class="container d-flex justify-content-center align-items-center" style="min-height: 80vh; padding: 2rem 0;">
  <div class="card shadow" style="width: 100%; max-width: 800px;">
    <div class="card-header text-center bg-light">
      <h4 class="mb-0 text-dark">Formularios Dinámicos</h4>
    </div>
    <div class="card-body">

      <form
        autocomplete="off"
        [formGroup]="myForm"
        (ngSubmit)="onSubmit()"
      >

        <!-- Nombre -->
        <div class="mb-3 row">
          <label class="col-sm-3 col-form-label">Nombre</label>
          <div class="col-sm-9">
            <input
              class="form-control"
              formControlName="name"
              placeholder="Nombre del proyecto"
            >

            @if(formUtils.isValidField(myForm, 'name')){
              <div class="form-text text-danger">
                {{ formUtils.getFieldError(myForm, 'name') }}
              </div>
            }
          </div>
        </div>

        <!-- Agregar Lenguaje -->
        <div class="mb-3 row">
          <label class="col-sm-3 col-form-label">Agregar</label>
          <div class="col-sm-9">
            <div class="input-group">
              <input
                class="form-control"
                placeholder="Agregar lenguaje"
                [formControl]="newLenguaje"
                (keydown.enter)="onAddToLenguajes(); $event.preventDefault()"
              >

              <button
                class="btn btn-outline-secondary"
                type="button"
                (click)="onAddToLenguajes()"
              >
                Agregar
              </button>
            </div>
          </div>
        </div>

        <!-- Lista dinámica -->
        <div class="mb-3 row">
          <label class="col-sm-3 col-form-label">Lenguajes</label>

          <div class="col-sm-9" formArrayName="lenguajes">

            @for(item of lenguajes.controls; track item; let i = $index) {

              <div class="input-group mb-2">
                <input class="form-control" [formControlName]="i">
                <button
                  class="btn btn-outline-secondary"
                  type="button"
                  (click)="onDeleteLenguaje(i)"
                >
                  Eliminar
                </button>
              </div>

              @if(formUtils.isValidFieldInArray(lenguajes, i)) {
                <div class="form-text text-danger">
                  {{ formUtils.getFieldErrorInArray(lenguajes, i) }}
                </div>
              }
            }

            @if(formUtils.isValidField(myForm, 'lenguajes')){
              <div class="form-text text-danger">
                Debe tener mínimo 3 lenguajes
              </div>
            }

          </div>
        </div>

        <!-- Botón de envío -->
        <div class="row">
          <div class="col-12 text-end">
            <button type="submit" class="btn btn-primary">
              Enviar
            </button>
          </div>
        </div>

      </form>

    </div>
  </div>
</div>
